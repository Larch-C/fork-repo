#!/usr/bin/env bash
set -e

{
  echo "# ðŸŽ¯ AstrBotæ’ä»¶Fork/Syncæ“ä½œå®Œæˆ"
  echo ""
  echo "ðŸ“Š **åŸºæœ¬ä¿¡æ¯:**"
  echo "- æ€»ä»“åº“æ•°: ${TOTAL_COUNT}"
  echo "- æ‰¹æ¬¡æ•°é‡: ${BATCH_COUNT}"
  if [ "${DRY_RUN}" = "true" ]; then
    echo "- æ“ä½œæ¨¡å¼: ðŸ” è¯•è¿è¡Œ"
  else
    echo "- æ“ä½œæ¨¡å¼: â–¶ï¸ å®žé™…æ‰§è¡Œ"
  fi
  if [ "${FORCE_SYNC}" = "true" ]; then
    echo "- å¼ºåˆ¶åŒæ­¥: âœ… æ˜¯"
  else
    echo "- å¼ºåˆ¶åŒæ­¥: âŒ å¦"
  fi
  echo "- å†²çªç­–ç•¥: ${CONFLICT_STRATEGY}"
  echo ""
  echo "ðŸ”§ **ä»»åŠ¡çŠ¶æ€:**"
  echo "- å‡†å¤‡é˜¶æ®µ: ${PREPARE_RESULT}"
  echo "- æ‰¹æ¬¡åˆ›å»º: ${CREATE_BATCHES_RESULT}"
  echo "- Fork/Sync: ${FORK_SYNC_RESULT}"
  echo "- ç»“æžœæ”¶é›†: ${COLLECT_RESULTS_RESULT}"
  echo ""
  if [ "${COLLECT_RESULTS_RESULT}" = "success" ]; then
    echo "âœ… **è¯¦ç»†ç»“æžœè¡¨æ ¼å·²ç”Ÿæˆï¼**"
    echo ""
    echo "ðŸ“‹ è¯·æŸ¥çœ‹ä¸Šæ–¹çš„ \`collect-results\` æ­¥éª¤èŽ·å–å®Œæ•´çš„ç»“æžœè¡¨æ ¼ã€‚"
    echo ""
    echo "ðŸ’¾ **ç»“æžœæ–‡ä»¶:**"
    echo "- å¯åœ¨ Artifacts ä¸­ä¸‹è½½ \`fork-sync-results\` æ–‡ä»¶æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š"
    echo "- åŒ…å«æ‰€æœ‰ä»“åº“çš„forkçŠ¶æ€ã€é‡å‘½åä¿¡æ¯ã€é“¾æŽ¥å’Œæ—¶é—´æˆ³"
  else
    echo "âš ï¸  **ç»“æžœæ”¶é›†çŠ¶æ€å¼‚å¸¸**"
    echo "- æ“ä½œçŠ¶æ€: ${FORK_SYNC_RESULT}"
    echo "- ç»“æžœæ”¶é›†: ${COLLECT_RESULTS_RESULT}"
    echo ""
    echo "ðŸ” **å¯èƒ½çš„åŽŸå› :**"
    echo "- ç½‘ç»œè¶…æ—¶æˆ–APIé™åˆ¶"
    echo "- æŸäº›ä»“åº“è®¿é—®æƒé™é—®é¢˜"
    echo "- GitHub APIä¸´æ—¶ä¸å¯ç”¨"
  fi
  echo ""
  echo "ðŸ†• **æ–°å¢žè‡ªåŠ¨é‡å‘½ååŠŸèƒ½:**"
  echo "- âœ… æ™ºèƒ½æ£€æµ‹é‡åå†²çªå¹¶è‡ªåŠ¨é‡å‘½åfork"
  echo "- âœ… å¤šç§å‘½åç­–ç•¥ï¼š'-astrbot', '-fork', '-plugin', 'astrbot-' å‰ç¼€"
  echo "- âœ… æ•°å­—åŽç¼€å¤‡é€‰æ–¹æ¡ˆï¼Œç¡®ä¿æ‰¾åˆ°å¯ç”¨åç§°"
  echo "- âœ… å®Œæ•´çš„é‡å‘½åè®°å½•å’Œç»Ÿè®¡ä¿¡æ¯"
  echo "- âœ… æ”¯æŒè¯•è¿è¡Œæ¨¡å¼é¢„è§ˆé‡å‘½åç»“æžœ"
  echo ""
  echo "ðŸ”„ **æ”¹è¿›ç‰¹æ€§:**"
  echo "- âœ… å¢žåŠ äº†é‡è¯•æœºåˆ¶ï¼ˆæ¯ä¸ªæ“ä½œæœ€å¤šé‡è¯•3æ¬¡ï¼‰"
  echo "- âœ… æ·»åŠ äº†è¶…æ—¶ä¿æŠ¤ï¼Œé¿å…é•¿æ—¶é—´é˜»å¡ž"
  echo "- âœ… æ”¹è¿›äº†é”™è¯¯å¤„ç†ï¼Œå•ä¸ªä»“åº“å¤±è´¥ä¸å½±å“æ•´æ‰¹"
  echo "- âœ… å‡å°‘äº†æ‰¹æ¬¡å¤§å°å’Œå¹¶å‘æ•°ï¼Œé™ä½ŽAPIåŽ‹åŠ›"
  echo "- âœ… å¢žåŠ äº†å»¶è¿Ÿæ—¶é—´ï¼Œæ›´å¥½åœ°é¿å…rate limit"
  echo ""
  echo "ðŸ”„ **å†²çªç­–ç•¥è¯´æ˜Ž:**"
  echo "- ðŸ·ï¸  **rename**: è‡ªåŠ¨é‡å‘½åå†²çªçš„forkï¼ˆæŽ¨èï¼‰"
  echo "- â­ï¸  **skip**: è·³è¿‡å†²çªçš„ä»“åº“"
  echo "- ðŸ¤” **interactive**: è®°å½•å†²çªå¾…æ‰‹åŠ¨å¤„ç†"
  echo ""
  echo "ðŸ’¡ **ä½¿ç”¨å»ºè®®:**"
  echo "- é¦–æ¬¡è¿è¡Œå»ºè®®ä½¿ç”¨è¯•è¿è¡Œæ¨¡å¼é¢„è§ˆç»“æžœ"
  echo "- æŽ¨èä½¿ç”¨ 'rename' ç­–ç•¥è‡ªåŠ¨å¤„ç†å†²çª"
  echo "- å®šæœŸè¿è¡Œä»¥ä¿æŒforkåŒæ­¥æœ€æ–°"
  echo "- æ£€æŸ¥é‡å‘½åçš„ä»“åº“ï¼Œç¡®ä¿ç¬¦åˆé¢„æœŸ"
} >> "$GITHUB_STEP_SUMMARY"


